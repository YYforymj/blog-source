---
title: mysql数据库拾遗01
date: 2018-10-23 17:16:17
categories: 数据库
---

> 一些关于mysql的小知识点。

<!-- more -->

##### 数据库三范式

第一范式：数据库表中的所有字段都是单一属性，不可再分，强调的是列的原子性。

第二范式：第一范式的基础上，数据表必须有一个主键；且没有包含在主键中的列必须完全依赖于主键，而不能只依赖于主键的一部分。 

第三范式：第一范式的基础上，任何非主键属性不依赖于其它非主键属性。

##### MyISAM 与 InnoDB 区别：

> 作者：Oscarwin
> 链接：https://www.zhihu.com/question/20596402/answer/211492971
> 来源：知乎
> 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
>
> 区别：
>
> 1. InnoDB支持事务，MyISAM不支持，对于InnoDB每一条SQL语言都默认封装成事务，自动提交，这样会影响速度，所以最好把多条SQL语言放在begin和commit之间，组成一个事务；  
> 2. InnoDB支持外键，而MyISAM不支持。对一个包含外键的InnoDB表转为MYISAM会失败；
> 3. InnoDB是聚集索引，数据文件是和索引绑在一起的，必须要有主键，通过主键索引效率很高。但是辅助索引需要两次查询，先查询到主键，然后再通过主键查询到数据。因此，主键不应该过大，因为主键太大，其他索引也都会很大。而MyISAM是非聚集索引，数据文件是分离的，索引保存的是数据文件的指针。主键索引和辅助索引是独立的。
> 4. InnoDB不保存表的具体行数，执行select count(*) from table时需要全表扫描。而MyISAM用一个变量保存了整个表的行数，执行上述语句时只需要读出该变量即可，速度很快；
> 5. Innodb不支持全文索引，而MyISAM支持全文索引，查询效率上MyISAM要高；
>
> 如何选择：
>
> 1. 是否要支持事务，如果要请选择innodb，如果不需要可以考虑MyISAM；
> 2. 如果表中绝大多数都只是读查询，可以考虑MyISAM，如果既有读写也挺频繁，请使用InnoDB。
> 3. 系统奔溃后，MyISAM恢复起来更困难，能否接受； 
> 4. MySQL5.5版本开始Innodb已经成为Mysql的默认引擎(之前是MyISAM)，说明其优势是有目共睹的，如果你不知道用什么，那就用InnoDB，至少不会差。

##### MySQL中int(3)、int(10)和int(11)的区别

int类型数据mysql中定义为 INT[(M)][UNSIGNED] [ZEROFILL] ，其中M指示最大**显示宽度**，默认为11。需要注意的是，这里的M代表的并不是存储在数据库中的具体的长度，以前总是会误以为int(3)只能存储3个长度的数字，int(11)就会存储11个长度的数字，这是大错特错的。**其实当我们在选择使用int的类型的时候，不论是int(3)还是int(11)，它在数据库里面存储的都是4个字节的长度。**当M小于10的时候，比如使用int(3)，如果你输入的是10，会默认给你存储为0,000,000,010，也就是说这个M代表的是默认的一个长度，当M<10时，无论设置为几都会补足为10位；而当M大于10时，按照M的位数显示。

##### 为什么int类型字段在mysql中默认int(11) 无符号默认int(10)

int无符号类型 取值在 0 ~ 4294967295之间

有符号数最小值:

- -2 1 4 7 4 8 3 6 4  8   --共11位

无符号数最大值:

- 4 2 9 4 9 6 7 2 9 5    --共10位

所以mysql默认显示的int（11）和 unsign int（10）,只是表示存储数值显示后的位数，并不是实际存储的位数。而当一个数据超出定义列的数据类型的范围时,数据会以数据类型所允许的最大值存储。

##### 数据库字段类型选择原则

- 对数据进行比较、查询、排序等操作时，同样的数据字符处理通常比数字慢；数据库中，单一列的长度越小，越有利于性能提升。
- 定长优先于变长类型。对于char与varchar如果列最大数据长度小于50Byte，优先考虑char（如果用的少也可以用varchar）；当长度大于50不宜使用char。
- decimal用于存储精确数据，float存储开销小用于非精确数据。
- int可以用于存储查询频率低的时间（存储时间戳）。

